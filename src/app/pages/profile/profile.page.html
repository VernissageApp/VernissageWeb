<div *ngIf="user && isReady" @fadeIn>
    <img class="header-image" alt="header" [src]="this.user.headerUrl ?? '/assets/header.jpg'" />
    <img class="avatar-image" alt="header" [src]="this.user.avatarUrl ?? '/assets/avatar.svg'" />

    <div class="flex-row flex-space-around padding-left-10 padding-right-10">
        <div class="profile">
            <div class="text-center">
                <div class="mat-h1">{{ user.name }}</div>
                <div class="mat-h4">@{{ user.userName }}</div>
                <div class="bio" [innerHTML]="user.bioHtml"></div>
            </div>

            <app-follow-buttons-section [user]="user" [relationship]="relationship" (relationChanged)="onMainRelationChanged()"></app-follow-buttons-section>

            <div *ngIf="(latestFollowers?.length ?? 0) > 0" class="text-center padding-top-10 padding-bottom-10">
                <div class="text-muted padding-bottom-5">LATEST FOLLOWERS</div>
                <ng-container *ngFor="let item of latestFollowers">
                    <img class="follower-image" [src]="item.avatarUrl ?? '/assets/avatar.svg'" [matTooltip]="item.name ?? item.userName ?? ''" />
                </ng-container>
            </div>

            <div class="margin-auto fields-container">
                <mat-card *ngIf="(user.fields?.length ?? 0) > 0" appearance="outlined">
                    <mat-card-content>
                        <ng-container *ngFor="let item of user.fields; let i = index">
                            <div class="flex-row flex-align-center flex-space-between margin-bottom-10">
                                <div>
                                    <div class="field-key text-muted">{{ item.key }}</div>
                                    <div class="field-value" [innerHTML]="item.valueHtml"></div>
                                </div>
                                <div class="margin-left-10">
                                    <mat-icon *ngIf="item.isVerified" class="text-success margin-top-5">check_circle</mat-icon>
                                </div>
                            </div>
                            <mat-divider *ngIf="(i + 1) < (user.fields?.length ?? 0)" class="padding-bottom-5"></mat-divider>
                        </ng-container>
                    </mat-card-content>
                </mat-card>
            </div>

            <div class="flex-row flex-center padding-top-10 padding-bottom-10">
                <div class="margin-left-20 margin-right-20"><span class="fw-500">{{ user.statusesCount }}</span><span class="fw-200 margin-left-5" [ngClass]="{ 'dashed': profilePageTab === ProfilePageTab.Statuses}"><a [routerLink]="['/', userName]">Posts</a></span></div>
                <div class="margin-left-20 margin-right-20"><span class="fw-500">{{ user.followingCount }}</span><span class="fw-200 margin-left-5" [ngClass]="{ 'dashed': profilePageTab === ProfilePageTab.Following}"><a [routerLink]="['following']">Following</a></span></div>
                <div class="margin-left-20 margin-right-20"><span class="fw-500">{{ user.followersCount }}</span><span class="fw-200 margin-left-5" [ngClass]="{ 'dashed': profilePageTab === ProfilePageTab.Followers}"><a [routerLink]="['followers']">Followers</a></span></div>
            </div>

            <div class="padding-bottom-20">
                <div *ngIf="profilePageTab === ProfilePageTab.Following">
                    <app-users-card *ngIf="(following?.length ?? 0) > 0" [users]="following" [relationships]="followingRelationships" (relationChanged)="onRelationChanged($event)"></app-users-card>
                </div>
                <div *ngIf="profilePageTab === ProfilePageTab.Followers">
                    <app-users-card *ngIf="(followers?.length ?? 0) > 0" [users]="followers" [relationships]="followersRelationships" (relationChanged)="onRelationChanged($event)"></app-users-card>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="profilePageTab === ProfilePageTab.Statuses">
        <app-gallery [statuses]="statuses"></app-gallery>
    </div>
</div>
